<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>Roda::RodaPlugins::AdditionalViewDirectories</title>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='class' id='wrapper'>
<div class='header'>
<h1 class='name'><span class='type'>module</span>
Roda::RodaPlugins::AdditionalViewDirectories
</h1>
<ol class='paths'>
<li>
<a href="../../../files/lib/roda/plugins/additional_view_directories_rb.html">lib/roda/plugins/additional_view_directories.rb</a>
</li>
</ol>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<p>The additional_view_directories plugin allows for specifying additional view directories to look in for templates.  When rendering a template, it will first try the :views directory specified in the render plugin.  If the template file to be rendered does not exist in that directory, it will try each additional view directory specified in this plugin, in order, using the path to the first template file that exists in the file system.  If no such path is found, it uses the default path specified by the render plugin.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">plugin</span> <span class="ruby-value">:render</span>, <span class="ruby-value">:views</span><span class="ruby-operator">=&gt;</span><span class="ruby-string">&#39;dir&#39;</span>
<span class="ruby-identifier">plugin</span> <span class="ruby-value">:additional_view_directories</span>, [<span class="ruby-string">&#39;dir1&#39;</span>, <span class="ruby-string">&#39;dir2&#39;</span>, <span class="ruby-string">&#39;dir3&#39;</span>]

<span class="ruby-identifier">route</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
  <span class="ruby-comment"># Will check the following in order, using path for first</span>
  <span class="ruby-comment"># template file that exists:</span>
  <span class="ruby-comment"># * dir/t.erb</span>
  <span class="ruby-comment"># * dir1/t.erb</span>
  <span class="ruby-comment"># * dir2/t.erb</span>
  <span class="ruby-comment"># * dir3/t.erb</span>
  <span class="ruby-identifier">render</span> <span class="ruby-value">:t</span>
<span class="ruby-keyword">end</span>
</pre>
</div>
<div id='method-list'>
<h2>Methods</h2>
<h3>Public Class</h3>
<ol>
<li><a href="#method-c-configure">configure</a></li>
<li><a href="#method-c-load_dependencies">load_dependencies</a></li>
</ol>
</div>
<div id='context'>
</div>
<div id='class-list'>
<h2>Classes and Modules</h2>
<ol>
<li><a href="AdditionalViewDirectories/InstanceMethods.html">Roda::RodaPlugins::AdditionalViewDirectories::InstanceMethods</a></li>
</ol>
</div>
<div id='section'>
<div id='methods'>
<h2>Public Class methods</h2>
<div class='method public-class' id='method-method-c-configure'>
<a name='method-c-configure'></a>
<div class='synopsis'>
<span class='name'>configure</span><span class='arguments'>(app, view_dirs)</span>

</div>
<div class='description'>

<p>Set the additional view directories to look in. Each additional view directory is also added as an allowed path.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-configure-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-configure-source'>   <span class="ruby-comment"># File lib/roda/plugins/additional_view_directories.rb</span>
<span class="line-num">37</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">configure</span>(<span class="ruby-identifier">app</span>, <span class="ruby-identifier">view_dirs</span>)
<span class="line-num">38</span>   <span class="ruby-identifier">view_dirs</span> = <span class="ruby-identifier">app</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:additional_view_directories</span>] = <span class="ruby-identifier">view_dirs</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">app</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">f</span>, <span class="ruby-keyword">nil</span>)}.<span class="ruby-identifier">freeze</span>
<span class="line-num">39</span>   <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">app</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:render</span>]
<span class="line-num">40</span>   <span class="ruby-identifier">app</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:render</span>] = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:allowed_paths</span><span class="ruby-operator">=&gt;</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:allowed_paths</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">view_dirs</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">freeze</span>)
<span class="line-num">41</span>   <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">freeze</span>
<span class="line-num">42</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-class' id='method-method-c-load_dependencies'>
<a name='method-c-load_dependencies'></a>
<div class='synopsis'>
<span class='name'>load_dependencies</span><span class='arguments'>(app, view_dirs)</span>

</div>
<div class='description'>

<p>Depend on the render plugin, since this plugin only makes sense when the render plugin is used.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-load_dependencies-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-load_dependencies-source'>   <span class="ruby-comment"># File lib/roda/plugins/additional_view_directories.rb</span>
<span class="line-num">31</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">load_dependencies</span>(<span class="ruby-identifier">app</span>, <span class="ruby-identifier">view_dirs</span>)
<span class="line-num">32</span>   <span class="ruby-identifier">app</span>.<span class="ruby-identifier">plugin</span> <span class="ruby-value">:render</span>
<span class="line-num">33</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
</div>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna-nouveau"><strong>Hanna Nouveau</strong> RDoc template</a>
</div>
</body>
</html>
